<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
</head>
<body>
<h2>Rental History</h2>
<table>
    <thead>
        <tr>
            <th>User</th>
            <th>Car</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Total Cost</th>
            <th>Date Created</th>
            <th>Payment Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for rental in rentals %}
        <tr>
            <td>{{ rental.user.username }}</td>
            <td>{{ rental.car.make }} {{ rental.car.model }}</td>
            <td>{{ rental.start_date }}</td>
            <td>{{ rental.end_date }}</td>
            <td>{{ rental.total_cost }}</td>
            <td>{{ rental.date_created }}</td>
            <td>{{ 'Paid' if rental.payment_status else 'Unpaid' }}</td>
            <td>
                <form action="{{ url_for('update_payment_status', rental_id=rental.id) }}" method="post">
                    <select name="payment_status">
                        <option value="Paid" {% if rental.payment_status %}selected{% endif %}>Paid</option>
                        <option value="Unpaid" {% if not rental.payment_status %}selected{% endif %}>Unpaid</option>
                    </select>
                    <button type="submit">Update</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</body>
</html>